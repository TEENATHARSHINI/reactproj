<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Code Reviewer - Simple Version</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@monaco-editor/react@4.6.0"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            margin: 0;
            padding: 0;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const MonacoEditor = window.MonacoEditor.default;

        function App() {
            const [code, setCode] = useState('// Enter your code here\nfunction example() {\n  console.log("Hello, world!");\n}');
            const [language, setLanguage] = useState('javascript');
            const [reviews, setReviews] = useState([]);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);

            const handleCodeChange = (newCode) => {
                setCode(newCode);
            };

            const handleLanguageChange = (e) => {
                setLanguage(e.target.value);
            };

            const handleReview = () => {
                if (!code.trim()) {
                    setError('Please enter some code to review');
                    return;
                }

                setIsLoading(true);
                setError(null);

                // Simulate API call
                setTimeout(() => {
                    const newReview = {
                        id: Date.now().toString(),
                        code,
                        language,
                        feedback: 'This is a simulated review. In a real implementation, this would be generated by an AI model.',
                        suggestions: [
                            'Consider adding error handling',
                            'Add comments to explain complex logic',
                            'Consider breaking this into smaller functions',
                        ],
                        timestamp: new Date().toISOString(),
                    };

                    setReviews(prev => [newReview, ...prev]);
                    setIsLoading(false);
                }, 1500);
            };

            return (
                <div className="min-h-screen bg-gray-100">
                    <header className="bg-indigo-600 text-white shadow-lg">
                        <div className="container mx-auto px-4 py-4">
                            <div className="flex items-center space-x-2">
                                <svg className="w-8 h-8 text-indigo-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                                </svg>
                                <h1 className="text-2xl font-bold">AI Code Reviewer</h1>
                            </div>
                        </div>
                    </header>

                    <main className="container mx-auto p-4 mt-6">
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                                <div className="bg-white rounded-lg shadow-md p-4">
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-semibold">Code Editor</h2>
                                        <div className="flex items-center space-x-2">
                                            <select
                                                value={language}
                                                onChange={handleLanguageChange}
                                                className="px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                            >
                                                <option value="javascript">JavaScript</option>
                                                <option value="typescript">TypeScript</option>
                                                <option value="python">Python</option>
                                                <option value="java">Java</option>
                                                <option value="cpp">C++</option>
                                            </select>
                                            <button
                                                onClick={handleReview}
                                                disabled={isLoading || !code.trim()}
                                                className={`px-4 py-2 rounded-md text-white font-medium ${
                                                    isLoading || !code.trim()
                                                        ? 'bg-indigo-300 cursor-not-allowed'
                                                        : 'bg-indigo-600 hover:bg-indigo-700'
                                                } transition-colors`}
                                            >
                                                {isLoading ? 'Reviewing...' : 'Review Code'}
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div className="h-96 border border-gray-300 rounded-lg overflow-hidden">
                                        <MonacoEditor
                                            height="100%"
                                            defaultLanguage={language}
                                            language={language}
                                            value={code}
                                            onChange={handleCodeChange}
                                            theme="vs-light"
                                            options={{
                                                minimap: { enabled: false },
                                                scrollBeyondLastLine: false,
                                                fontSize: 14,
                                                wordWrap: 'on',
                                                automaticLayout: true,
                                                padding: { top: 10 },
                                            }}
                                        />
                                    </div>
                                    
                                    {error && (
                                        <div className="mt-2 p-2 bg-red-100 border border-red-400 text-red-700 rounded">
                                            {error}
                                        </div>
                                    )}
                                    
                                    <div className="mt-2 text-sm text-gray-500">
                                        <p>Paste or type your code above and click "Review Code" to get AI-powered feedback.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <div className="bg-white rounded-lg shadow-md p-4">
                                    <h2 className="text-xl font-semibold mb-4">Code Reviews</h2>
                                    
                                    {isLoading ? (
                                        <div className="flex items-center justify-center h-64">
                                            <div className="animate-pulse flex flex-col items-center">
                                                <div className="w-12 h-12 bg-indigo-200 rounded-full mb-4"></div>
                                                <div className="text-gray-600">Analyzing your code...</div>
                                            </div>
                                        </div>
                                    ) : reviews.length === 0 ? (
                                        <div className="h-64 flex flex-col items-center justify-center text-center p-8 text-gray-500">
                                            <svg className="w-16 h-16 text-indigo-200 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                            </svg>
                                            <h3 className="text-lg font-medium text-gray-900 mb-1">No reviews yet</h3>
                                            <p>Submit your code for review to see AI-powered feedback and suggestions for improvement.</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-4 max-h-[calc(100vh-200px)] overflow-y-auto pr-2">
                                            {reviews.map((review) => (
                                                <div key={review.id} className="border border-gray-200 rounded-lg p-4">
                                                    <div className="flex justify-between items-center mb-2">
                                                        <span className="px-2 py-1 bg-indigo-100 text-indigo-800 text-xs font-medium rounded">
                                                            {review.language}
                                                        </span>
                                                        <span className="text-sm text-gray-500">
                                                            {new Date(review.timestamp).toLocaleString()}
                                                        </span>
                                                    </div>
                                                    
                                                    <h4 className="font-medium text-gray-900 mt-2">Feedback:</h4>
                                                    <div className="bg-blue-50 p-3 rounded-md text-sm text-gray-800 my-2">
                                                        {review.feedback}
                                                    </div>
                                                    
                                                    <h4 className="font-medium text-gray-900 mt-3">Suggestions:</h4>
                                                    <ul className="list-disc pl-5 space-y-1 text-sm text-gray-700 mt-1">
                                                        {review.suggestions.map((suggestion, index) => (
                                                            <li key={index}>{suggestion}</li>
                                                        ))}
                                                    </ul>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
